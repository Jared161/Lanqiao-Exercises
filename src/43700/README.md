# 43700 - 取球博弈

![Year: 2016](https://img.shields.io/badge/Year-2016-white)
![Level: Provincial](https://img.shields.io/badge/Level-Provincial-blue)
![Python3](https://img.shields.io/badge/Python3-AC-green)

## 题目

### 题目描述

两个人玩取球的游戏。

一共有 $N$ 个球，每人轮流取球，每次可取集合 $\{n_1,n_2,n_3\}$ 中的任何一个数目。

如果无法继续取球，则游戏结束。

此时，持有**奇数个球**的一方获胜。

如果两人都是奇数，则为平局。

假设双方都采用最聪明的取法，

**第一个**取球的人一定能赢吗？

试编程解决这个问题。

### 输入描述

输入格式：

第一行 3 个正整数 $n_1,n_2,n_3\ (0<n_1,n_2,n_3<100)$ ，空格分开，表示每次可取的数目。

第二行 5 个正整数 $x_1,x_2,\cdots,x_5\ (0<x_i<1000)$ ，空格分开，表示 5 局的初始球数。

### 输出描述

输出一行 5 个字符，空格分开。分别表示每局先取球的人能否获胜。

能获胜则输出 `+`，次之，如有办法逼平对手，输出 `0`，无论如何都会输，则输出 `-`。

### 输入输出样例

#### 示例

> 输入

```txt
1 2 3
1 2 3 4 5
```

> 输出

```txt
+ 0 + 0 -
```

## 分析

本题可以使用**极大极小算法解决**。

设先手为极大化者，后手为极小化者。对于某个局面，如果怎么拿球都会导致剩余的球数为负数，那么说明无法继续取球，此时游戏结束，返回获胜结果；否则，尝试每种可能的取球数量，并根据极大极小化思想，选取最佳的取球数量，然后返回其获胜结果。

在上述过程中，缓存“已经搜索过的局面”是极有必要的，而如何判断两种局面相等也颇有一番技巧：如果认为“剩余球数，先手持球数，后手持球数，谁来进攻”这四个指标都相等，才认为两种局面相等的话，是不够好的。更好的办法应该是认为“剩余球数，先手持球数的奇偶性，后手持球数的奇偶性，谁来进攻”这四个指标都相等。这样做是因为，持球数对胜负判定和游戏过程没有意义，持球数的**奇偶性**才有意义——根据此思想可以为很多局面建立等价关系，从而大幅减少搜索的时间消耗。
